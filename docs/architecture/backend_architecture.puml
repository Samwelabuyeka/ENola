@startuml ENola
!pragma useIntermediatePackages false

class ENola.action.agent.AgentEchoAction {
  content: str
  runnable: bool
  action: str
}
class ENola.action.agent.AgentFinishAction {
  runnable: bool
  action: str
}
class ENola.observation.AgentMessageObservation {
  role: str
  observation: str
}
class ENola.action.agent.AgentRecallAction {
  query: str
  action: str
}
class ENola.observation.AgentRecallObservation {
  memories: List[str]
  role: str
  observation: str
}
class ENola.action.agent.AgentSummarizeAction {
  summary: str
  action: str
}
class ENola.action.agent.AgentThinkAction {
  thought: str
  runnable: bool
  action: str
}
class ENola.action.base.ExecutableAction {
}
class ENola.action.base.NotExecutableAction {
}
class ENola.observation.Observation {
  content: str
}
class ENola.action.base.Action {
}
class ENola.action.base.NullAction {
  action: str
}
class ENola.action.bash.CmdKillAction {
  id: int
  action: str
}
class ENola.action.bash.CmdRunAction {
  command: str
  background: bool
  action: str
}
class ENola.action.browse.BrowseURLAction {
  url: str
  action: str
}
class ENola.observation.BrowserOutputObservation {
  url: str
  status_code: int
  error: bool
  observation: str
}
class ENola.action.fileop.FileReadAction {
  path: str
  action: str
}
class ENola.observation.FileReadObservation {
  path: str
  observation: str
}
class ENola.action.fileop.FileWriteAction {
  path: str
  contents: str
  action: str
}
class ENola.observation.FileWriteObservation {
  path: str
  observation: str
}
class ENola.action.tasks.AddTaskAction {
  parent: str
  goal: str
  subtasks: list
  action: str
}
class ENola.action.tasks.ModifyTaskAction {
  id: str
  state: str
  action: str
}
abstract class ENola.agent.Agent {
  _registry: Dict[str, Type[Agent]] {static}
  llm: LLM
  _complete: None
}
class ENola.llm.llm.LLM {
  model: None
  api_key: None
  base_url: None
  _debug_dir: None
  _debug_idx: None
  _debug_id: None
  _completion: None
}
class ENola.controller.agent_controller.AgentController {
  agent: Agent
  max_iterations: int
  workdir: str
  command_manager: CommandManager
  state: State
  plan: Plan
  callbacks: List[Callable]
}
class ENola.observation.AgentErrorObservation {
  observation: str
}
class ENola.controller.command_manager.CommandManager {
  directory: None
  shell: None
}
class ENola.observation.NullObservation {
  observation: str
}
class ENola.plan.Plan {
  main_goal: str {static}
  task: Task {static}
  main_goal: str
  task: None
}
class ENola.state.State {
  plan: Plan
  iteration: int
  background_commands_obs: List[CmdOutputObservation]
  history: List[Tuple[Action, Observation]]
  updated_info: List[Tuple[Action, Observation]]
}
class ENola.observation.CmdOutputObservation {
  command_id: int
  command: str
  exit_code: int
  observation: str
}
class ENola.sandbox.sandbox.DockerInteractive {
  background_commands: Dict[int, BackgroundCommand] {static}
  instance_id: None
  instance_id: None
  workspace_dir: None
  workspace_dir: None
  workspace_dir: None
  timeout: int
  container_image: None
  container_name: None
}
class ENola.observation.UserMessageObservation {
  role: str
  observation: str
}
class ENola.plan.Task {
  id: str {static}
  goal: str {static}
  parent: Task | None {static}
  subtasks: List[Task] {static}
  id: None
  id: None
  parent: None
  goal: str
  subtasks: None
}

class ENola.server.session.Session {
  websocket: None
  controller: Optional[AgentController]
  agent: Optional[Agent]
  agent_task: None
}

ENola.action.base.ExecutableAction <|-- ENola.action.agent.AgentEchoAction
ENola.action.base.NotExecutableAction <|-- ENola.action.agent.AgentFinishAction
ENola.observation.Observation <|-- ENola.observation.AgentMessageObservation
ENola.action.base.ExecutableAction <|-- ENola.action.agent.AgentRecallAction
ENola.observation.Observation <|-- ENola.observation.AgentRecallObservation
ENola.action.base.NotExecutableAction <|-- ENola.action.agent.AgentSummarizeAction
ENola.action.base.NotExecutableAction <|-- ENola.action.agent.AgentThinkAction
ENola.action.base.Action <|-- ENola.action.base.ExecutableAction
ENola.action.base.Action <|-- ENola.action.base.NotExecutableAction
ENola.action.base.NotExecutableAction <|-- ENola.action.base.NullAction
ENola.action.base.ExecutableAction <|-- ENola.action.bash.CmdKillAction
ENola.action.base.ExecutableAction <|-- ENola.action.bash.CmdRunAction
ENola.action.base.ExecutableAction <|-- ENola.action.browse.BrowseURLAction
ENola.observation.Observation <|-- ENola.observation.BrowserOutputObservation
ENola.action.base.ExecutableAction <|-- ENola.action.fileop.FileReadAction
ENola.observation.Observation <|-- ENola.observation.FileReadObservation
ENola.action.base.ExecutableAction <|-- ENola.action.fileop.FileWriteAction
ENola.observation.Observation <|-- ENola.observation.FileWriteObservation
ENola.action.base.NotExecutableAction <|-- ENola.action.tasks.AddTaskAction
ENola.action.base.NotExecutableAction <|-- ENola.action.tasks.ModifyTaskAction
ENola.agent.Agent *-- ENola.agent.Agent
ENola.agent.Agent *-- ENola.llm.llm.LLM
ENola.controller.agent_controller.AgentController *-- ENola.agent.Agent
ENola.observation.Observation <|-- ENola.observation.AgentErrorObservation
ENola.observation.Observation <|-- ENola.observation.NullObservation
ENola.plan.Plan *-- ENola.plan.Task
ENola.state.State *-- ENola.plan.Plan
ENola.state.State *-- ENola.observation.CmdOutputObservation
ENola.state.State *-- ENola.action.base.Action
ENola.state.State *-- ENola.observation.Observation
ENola.observation.Observation <|-- ENola.observation.CmdOutputObservation
ENola.sandbox.sandbox.DockerInteractive *-- ENola.sandbox.sandbox.BackgroundCommand
ENola.observation.Observation <|-- ENola.observation.UserMessageObservation
ENola.plan.Task *-- ENola.plan.Task
ENola.server.session.Session *-- ENola.controller.agent_controller.AgentController
ENola.server.session.Session *-- ENola.agent.Agent
ENola.controller.agent_controller.AgentController -> ENola.state.State
ENola.controller.agent_controller.AgentController -> ENola.plan.Plan
ENola.controller.agent_controller.AgentController -> ENola.controller.command_manager.CommandManager
ENola.controller.command_manager.CommandManager -> ENola.sandbox.sandbox.DockerInteractive

footer Based on f3fda42; Generated by //py2puml//
@enduml